FROM node:20-alpine AS builder
WORKDIR /src/app
COPY app/ .
RUN npm install
RUN npx ng build

FROM caddy:2.10.0-alpine
COPY build/Caddyfile /etc/caddy/Caddyfile
COPY --from=builder /src/app/dist/app /app/
EXPOSE 80